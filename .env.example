# Mailcow Backup to Hetzner Storage Box Configuration
# Copy this file to /etc/mailcow-backup/.env and configure your settings

# ============================================
# Hetzner Storage Box Settings
# ============================================

# Hetzner storage box hostname (e.g., u123456.your-storagebox.de)
HETZNER_HOST=your-storagebox.your-provider.de

# SSH port (default: 23 for Hetzner storage boxes)
HETZNER_PORT=23

# Hetzner storage box username (e.g., u123456 or u123456-sub1)
HETZNER_USER=your-username

# Path to SSH private key for authentication
# Make sure this key is added to your Hetzner storage box authorized_keys
SSH_KEY_PATH=/root/.ssh/id_rsa_hetzner

# Remote path on Hetzner storage box where backups will be stored
# Hetzner Storage Boxes start in /home directory - use relative or absolute path
# Examples: mailcow-backups or /home/mailcow-backups
HETZNER_REMOTE_PATH=mailcow-backups

# ============================================
# Mailcow Settings
# ============================================

# Path to mailcow-dockerized installation
MAILCOW_PATH=/opt/mailcow-dockerized

# Components to backup (all, or specific: vmail crypt redis rspamd postfix mysql)
# Default: all
BACKUP_COMPONENTS=all

# Number of threads for backup operation
# Recommended: CPU cores - 2
THREADS=4

# ============================================
# Backup Retention Settings
# ============================================

# Number of days to keep local backups before deletion
LOCAL_RETENTION_DAYS=7

# Number of days to keep remote backups on Hetzner before deletion
REMOTE_RETENTION_DAYS=30

# ============================================
# Lock File Settings
# ============================================

# Maximum age of lock file in hours before considering it stale
# If a backup process is locked longer than this, the lock will be overridden
LOCK_TIMEOUT_HOURS=24

# ============================================
# Logging Settings
# ============================================

# Path to log file for backup operations
LOG_FILE=/var/log/mailcow-backup.log

# ============================================
# Advanced Settings
# ============================================

# Temporary directory for local backups before transfer
# IMPORTANT: Local backup is deleted immediately after successful transfer to save space
# Ensure sufficient space for one backup (approximately equal to Docker volumes size)
# Check available space: df -h
TEMP_BACKUP_DIR=/tmp/mailcow-backup
